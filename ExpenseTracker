import java.util.*;

class Expense {
    double amount;
    String category;
    String description;
    Date date;

    public Expense(double amount, String category, String description, Date date) {
        this.amount = amount;
        this.category = category;
        this.description = description;
        this.date = date;
    }

    @Override
    public String toString() {
        return String.format("R%.2f - %s (%s) on %s",
                amount, category, description, date.toString());
    }
}

class Salary {
    private double monthlySalary;

    public void setMonthlySalary(double salary) {
        this.monthlySalary = salary;
    }

    public double getMonthlySalary() {
        return monthlySalary;
    }

    @Override
    public String toString() {
        return String.format("Your monthly salary is: R%.2f", monthlySalary);
    }
}

public class ExpenseTracker {
    private static List<Expense> expenses = new ArrayList<>();
    private static Scanner scanner = new Scanner(System.in);
    private static Salary salary = new Salary();

    public static void main(String[] args) {
        boolean running = true;

        while (running) {
            System.out.println("\n=== Expense Tracker ===");
            System.out.println("1. Set/Update Salary");
            System.out.println("2. Add Expense");
            System.out.println("3. View All Expenses");
            System.out.println("4. View Totals & Salary Report");
            System.out.println("5. Exit");
            System.out.print("Choose an option: ");

            int choice = scanner.nextInt();
            scanner.nextLine(); // clear buffer

            switch (choice) {
                case 1 -> setSalary();
                case 2 -> addExpense();
                case 3 -> viewExpenses();
                case 4 -> viewTotals();
                case 5 -> running = false;
                default -> System.out.println("Invalid option. Try again.");
            }
        }

        System.out.println("Goodbye! Keep saving wisely üí∞");
    }

    private static void setSalary() {
        System.out.print("Enter your monthly salary (R): ");
        double income = scanner.nextDouble();
        salary.setMonthlySalary(income);
        System.out.println("‚úÖ Salary updated!");
    }

    private static void addExpense() {
        if (salary.getMonthlySalary() <= 0) {
            System.out.println("‚ö†Ô∏è Please set your salary first!");
            return;
        }

        System.out.print("Enter amount (R): ");
        double amount = scanner.nextDouble();
        scanner.nextLine();

        System.out.print("Enter category (Food, Transport, Entertainment, Other): ");
        String category = scanner.nextLine();

        System.out.print("Enter description: ");
        String description = scanner.nextLine();

        Expense expense = new Expense(amount, category, description, new Date());
        expenses.add(expense);
        System.out.println("‚úÖ Expense added!");
    }

    private static void viewExpenses() {
        if (expenses.isEmpty()) {
            System.out.println("No expenses recorded yet.");
            return;
        }

        System.out.println("\n--- All Expenses ---");
        for (Expense e : expenses) {
            System.out.println(e);
        }
    }

    private static void viewTotals() {
        if (expenses.isEmpty()) {
            System.out.println("No expenses to calculate.");
            return;
        }

        double total = 0;
        Map<String, Double> categoryTotals = new HashMap<>();

        for (Expense e : expenses) {
            total += e.amount;
            categoryTotals.put(e.category, categoryTotals.getOrDefault(e.category, 0.0) + e.amount);
        }

        System.out.println("\n--- Totals ---");
        for (String category : categoryTotals.keySet()) {
            System.out.printf("%s: R%.2f%n", category, categoryTotals.get(category));
        }
        System.out.printf("Overall Total: R%.2f%n", total);

        // Salary comparison
        double income = salary.getMonthlySalary();
        if (income > 0) {
            double remaining = income - total;
            double percentageSpent = (total / income) * 100;

            System.out.printf("Salary: R%.2f%n", income);
            System.out.printf("Remaining Balance: R%.2f%n", remaining);
            System.out.printf("Percentage of Salary Spent: %.2f%%%n", percentageSpent);

            if (total > income) {
                System.out.println("‚ö†Ô∏è Warning: You have spent more than your salary!");
            } else if (percentageSpent > 70) {
                System.out.println("üí° Tip: You're spending most of your salary. Try saving more.");
            } else {
                System.out.println("üëç Great job managing your salary!");
            }
        } else {
            System.out.println("‚ö†Ô∏è Salary not set yet!");
        }
    }
}
